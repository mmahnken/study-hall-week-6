<html>
    <head>
        <title>Google Maps Example</title>
        <script   src="https://code.jquery.com/jquery-2.2.3.min.js"   integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo="   crossorigin="anonymous"></script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBW-lYFqJZf7ZPYs8mQf-8QqbCs6mNw8pI&callback=makeMeggiesMap" async defer></script>
        <style>
            #my-map {
                height:200px;
            }
        </style>
    </head>
    <body>
        <a href="/get-lat-long?food_to_eat={{something}}">Get food</a>
        <div id="my-map"></div>
        Search for a restaurant
        <input type="text" id="food">
        <script>
        var thisMap; 

        function makeMeggiesMap(){
            thisMap = new google.maps.Map(document.getElementById('my-map'), 
                {   
                    zoom: 10,
                    center: {"lng":-122.411540, "lat":37.788862}
                });

        }

        function putMarkerOnMap(resp){
            if (resp.result === "Your result was not found."){
                alert("Sorry, no result found. :( ");
            } else {
                var placeLat = resp.result.lat;
                var placeLng = resp.result.lng;
                var marker = new google.maps.Marker(
                        {
                            position: {'lat': placeLat, 'lng': placeLng},
                            map: thisMap,
                            title: 'Some restaurant'
                        }
                );

            }
        }

        function handleFoodEntry(evt){
            var whatTheyTyped = $('#food').val();
            // 2 alternative ways to get what the user typed:
            // document.getElementById("#food").value
            // evt.currentTarget.value
            var url = '/find-lat-long?place_to_eat='+whatTheyTyped;
            $.get(url, putMarkerOnMap);

        }

        $('#food').on('change', handleFoodEntry);
        
        </script>
    </body>
</html>